---
import Icon, { IconName } from "./Icon.astro";
import splashMBJ from "../assets/images/img-10.jpg";
import splashMBJSerwis from "../assets/images/img-9.png";
import { Image } from "astro:assets";
import { Theme } from "../layouts/index.astro";

interface Props {
	title: string;
	text: string[];
	theme: Theme;
	imageAlt: string;
}

const { title, text, theme, imageAlt }: Props = Astro.props;
const SPLASH_CTA = "Zobacz naszą ofertę";
const image = Theme.Administracja === theme ? splashMBJ : splashMBJSerwis;
---

<section>
	<figure data-splash>
		<Image
			src={image}
			alt={imageAlt}
			widths={[400, 500, 800, image.width]}
			sizes={`(max-width: 400px) 400px, (max-width: 800px) 800px, (max-width: 1360px) 500px, ${image.width}px`}
		/>
	</figure>
	<div>
		<h1 data-fade>{title}</h1>
		{
			text.length > 1 ? (
				<div>
					{text.map((text) => (
						<p data-fade>{text}</p>
					))}
				</div>
			) : (
				<p data-fade>{text[0]}</p>
			)
		}
		<a href="#oferta" data-fade>
			<Icon icon={IconName.ArrowDown} width={48} height={48} />
			{SPLASH_CTA}
		</a>
	</div>
</section>

<style>
	section {
		display: flex;
		background-color: var(--splash--background-color);
	}

	figure {
		flex: 1 1 40vw;
		max-height: 90vh;
		overflow: hidden;
	}

	figure img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	section > div {
		color: var(--splash--color);
		padding: min(var(--spacing--container), var(--spacing--3));
		display: flex;
		flex-direction: column;
		justify-content: center;
		flex: 1 1 60%;
	}

	h1 {
		margin-bottom: max(0.625em, var(--spacing--2));
	}

	@media (max-width: 799px) {
		section {
			flex-direction: column;
		}

		section figure {
			order: 2;
		}
	}

	@media (min-width: 800px) {
		section {
			position: sticky;
			z-index: 0;
			top: var(--header--height);
		}
	}

	section > div > div {
		display: flex;
		flex-wrap: wrap;
		gap: 1em 2.35em;
		font-size: clamp(var(--font-size--6), 0.7vw + 0.5rem, 1.5rem);
	}

	section > div > div p {
		flex: 1 1 min(300px, 29vw + 1rem);
		min-width: 300px;
	}

	p {
		color: var(--splash--text--color);
	}

	section > div > p {
		font-size: clamp(var(--font-size--5), 0.735vw + 0.5rem, 1.5rem);
	}

	a {
		display: flex;
		align-items: center;
		gap: var(--spacing--1);
		font-weight: 700;
		padding: max(var(--spacing--2), 2.35vw) 0;
	}

	@keyframes bounce2 {
		0%,
		20%,
		50%,
		80%,
		100% {
			transform: translateY(0);
		}
		40% {
			transform: translateY(-10%);
		}
		60% {
			transform: translateY(-5%);
		}
	}

	a :global(svg) {
		height: auto;
		width: max(3.125vw, 40px);
		animation: bounce2 1.2s ease infinite;
	}

	a:hover :global(svg) {
		animation: none;
	}
</style>
